<div class="page-layout">


<!-- FILTER SIDEBAR -->
<div class="filter-column">
  <div class="filters-card">

    <div class="filter-header">
      <h2>Filters</h2>
      <button class="reset-btn" (click)="clearFilters()">Reset</button>
    </div>

    <!-- STACK FILTER -->
    <div class="filter-group">
      <label class="filter-label">Stack</label>
      <p-select 
        [(ngModel)]="selectedStackId" 
        [options]="stacks" 
        optionLabel="name" 
        optionValue="id"
        placeholder="All Stacks"
        (onChange)="onStackChange($event)"
        styleClass="filter-select"
        [style]="{'width': '100%'}">
      </p-select>
    </div>

    <!-- CATEGORY FILTER -->
    <div class="filter-group">
      <label class="filter-label">Category</label>
      <p-select 
        [(ngModel)]="selectedCategoryId" 
        [options]="filteredCategories" 
        optionLabel="name" 
        optionValue="id"
        placeholder="All Categories"
        [disabled]="!filteredCategories.length"
        (onChange)="onCategoryChange($event)"
        styleClass="filter-select"
        [style]="{'width': '100%'}">
      </p-select>
    </div>

    <!-- SKILL FILTER -->
    <div class="filter-group">
      <label class="filter-label">Skill</label>
      <p-select 
        [(ngModel)]="selectedSkillId" 
        [options]="filteredSkills" 
        optionLabel="name" 
        optionValue="id"
        placeholder="All Skills"
        [disabled]="!filteredSkills.length"
        (onChange)="onSkillChangeDropdown($event)"
        styleClass="filter-select"
        [style]="{'width': '100%'}">
      </p-select>
    </div>

    <!-- DATE FILTER -->
    <div class="filter-group">
      <label class="filter-label">Last Used</label>
      <p-datepicker 
        [(ngModel)]="selectedLastUsedDate" 
        dateFormat="yy-mm-dd"
        [showIcon]="true"
        placeholder="Select Date"
        (onSelect)="filterEmployees()"
        [style]="{'width': '100%'}">
      </p-datepicker>
    </div>

    <!-- POSITION FILTER -->
    <div class="filter-group">
      <label class="filter-label">Position</label>
      <p-select 
        [(ngModel)]="selectedPosition" 
        [options]="positions" 
        optionLabel="name" 
        optionValue="name"
        placeholder="All Positions"
        (onChange)="onPositionDropdownChange($event)"
        styleClass="filter-select"
        [style]="{'width': '100%'}">
      </p-select>
    </div>

    <!-- TEAM FILTER -->
    <div class="filter-group">
      <label class="filter-label">Team</label>
      <p-select 
        [(ngModel)]="selectedTeam" 
        [options]="teamNames" 
        placeholder="All Teams"
        (onChange)="onTeamChange($event)"
        styleClass="filter-select"
        [style]="{'width': '100%'}">
      </p-select>
    </div>

    <!-- PRODUCT FILTER -->
    <div class="filter-group">
      <label class="filter-label">Product</label>
      <p-select 
        [(ngModel)]="selectedProduct" 
        [options]="productNames" 
        placeholder="All Products"
        (onChange)="onProductChange($event)"
        styleClass="filter-select"
        [style]="{'width': '100%'}">
      </p-select>
    </div>

    <!-- SEARCH FILTER -->
    <div class="filter-group">
      <label class="filter-label">Search</label>
      <p-inputGroup style="width: 100%;">
        <p-inputGroupAddon>
          <i class="pi pi-search"></i>
        </p-inputGroupAddon>
        <input 
          type="text" 
          pInputText 
          placeholder="Search by name/email..." 
          [(ngModel)]="searchText" 
          (input)="onSearch()"
          style="width: 100%;" />
      </p-inputGroup>
    </div>

  </div>
</div>


  <!-- Right: Employees Table -->
  <div class="table-column">
    <div class="table-container">
      <div class="employee-header">
        <h2>Employee List</h2>
      </div>

      <p-table 
        [value]="filteredEmployees" 
        [paginator]="true" 
        [rows]="10"
        [showCurrentPageReport]="true"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} employees"
        [rowsPerPageOptions]="[10, 25, 50]"
        styleClass="p-datatable-striped"
        [tableStyle]="{'min-width': '50rem'}">
        
        <ng-template pTemplate="header">
          <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Employee #</th>
            <th>Email</th>
            <th>Position</th>
            <th style="width: 150px;">Actions</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-employee>
          <tr>
            <td>{{ employee.firstName }}</td>
            <td>{{ employee.lastName }}</td>
            <td>{{ employee.employeeNumber }}</td>
            <td>{{ employee.email }}</td>
            <td>{{ employee.position }}</td>
            <td>
              <p-button 
                label="View" 
                icon="pi pi-eye"
                [text]="true"
                severity="info"
                (onClick)="viewProfile(employee.id)">
              </p-button>
            </td>
          </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="6" style="text-align: center; padding: 20px;">
              <div class="no-data">No employees found.</div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>

</div>

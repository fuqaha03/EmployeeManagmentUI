<div class="page-layout">

  <!-- LEFT: Add / Edit Form -->
  <div class="form-column">
    <h3>{{ isEditMode ? 'Edit Product' : 'Add New Product' }}</h3>

    <form (ngSubmit)="submitForm()">

      <!-- Name -->
      <div class="form-group">
        <label>Name:</label>
        <input type="text" [(ngModel)]="form.name" name="name" required>
      </div>

      <!-- Description -->
      <div class="form-group">
        <label>Description:</label>
        <textarea [(ngModel)]="form.description" name="description"></textarea>
      </div>

      <!-- Active Checkbox -->
      <div class="checkbox-group">
        <input type="checkbox" [(ngModel)]="form.isActive" name="isActive">
        <label>Active</label>
      </div>

      <!-- Buttons -->
      <button class="submit-btn" type="submit" [disabled]="!isFormValid()">
        {{ isEditMode ? 'Update Product' : 'Add Product' }}
      </button>

      <button 
        class="cancel-btn" 
        type="button" 
        (click)="resetForm()" 
        *ngIf="isEditMode">
        Cancel
      </button>

    </form>
  </div>

  <!-- RIGHT: Table -->
  <div class="table-column">
    <div class="table-container">

      <h2>Products List</h2>

      <!-- SEARCH -->
      <input
        type="text"
        placeholder="Search by name or description..."
        [(ngModel)]="searchText"
        (input)="applyFilter()"
        class="search-input"
      />

      <table class="custom-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Description</th>
            <th style="width: 160px;">Actions</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let product of filteredProducts">
            <td>{{ product.name }}</td>
            <td>{{ product.description }}</td>
            <td>
              <div class="action-buttons">
                <button class="icon-btn edit-icon" (click)="edit(product)">
                  <i class="bi bi-pencil-square"></i>
                </button>

                <button class="icon-btn delete-icon" (click)="delete(product.id!)">
                  <i class="bi bi-trash-fill"></i>
                </button>

                <button class="icon-btn members-icon" (click)="getMembers(product.id!)">
                  <i class="bi bi-people-fill"></i>
                </button>
              </div>
            </td>
          </tr>

          <tr *ngIf="filteredProducts.length === 0">
            <td colspan="4" class="no-data">No products found.</td>
          </tr>
        </tbody>
      </table>

    </div>
  </div>

</div>
